# nevaTrip

Система бронирования заказов.

Данный продукт будет полезен операторам кол-центра, принимающим большое количество заказов на те или иные мероприятия. 
В данном продукте под заказом подразумевается одна запись, которая может связанна с одним или сразу множеством купленных билетов на предстоящее мероприятие. (бесплатная версия имеет ряд ограничений: например добавление заказа с единственным билетом в заказе). При покупке билета, информацию система в автоматическом режиме генерирует к каждому - уникальный Bar код, который используется далее для формирования самого билета и последующей передачи его клиенту. Так же система хранить информацию о статусе билета (использован или нет), для организации корректного пропускного режима на мероприятие, и не допущения повторного прохождения по одному билету.

Структура информационной системы (составляющих приложения):
1.	База данных (далее «БД») в которой храниться информация о Вашем мероприятиях, ценах, а так же категориях билетов: например, льготный, групповой, взрослый, детский и т.д., физически расположена на наших серверах, и для доступа к  которым, вы запрашиваете отдельно по указанным контактным данным, информацию о подключении к ней, у нашей организации)
2.	Папка «STANDART» – внутренняя система создания заказа (далее «Стандартный» вариант)
3.	Папка «API» – сторонняя API для заказа (далее «API»)

Для начала использования продукта, необходимо добавить в БД, к которой мы предоставили Вам доступ - исходные данных по следующей схеме:

1. Создаем мероприятие в таблице Event
1.1. Дата мероприятия
1.2. Описание мероприятия

2. Описываем необходимые типы билетов в таблице TiketTypes (льготный, групповой и т.п.). В случае если необходимые категории уже существуют - пропускаем шаг.

3. Создаем список цен на билеты в таблице TicketPrice:
3.1. Указываем для какого события создается билет
3.2. Выбираем по id, необходимый тип билета
3.3. Указываем цену за билет для текущего типа

Далее копируем на Ваш собственный сервер файлы проекта (ваш сервер должен поддерживать PHP >v.5). Система готова к работе!

Возможны два варианта взаимодействия: «Стандартный» и «сторонняя API»

«Стандартный»
Файл «index.html» - Представляет из себя стандартную форму, для заполнения данных о заказе с одним билетом, без выбора категории. Предает введенные оператором данные и записывает их в БД. Как правило храниться на вашем сервере.

«API» - дополнительная возможность для передачи полномочий по бронированию билетов сторонним организациям. (Дополнительно проверяет статус для добавление нового билета и в случае если введенные данные корректны, записывает их в вашу БД).
Логика процесса «Стандартный»:
1.	Происходит ввод данных оператором
2.	Введенные данные передаются на страницу реализующую запись их в бд

Логика процесса «API»
1.	Получаемые данные уже определены
2.	Получаем от первой api (api.site.com.book.php) случайный ответ запросом ajax, при успешном запросе происходит запрос к странице «api.site.com.approve.php»
3.	При запросе к «api.site.com.approve.php» происходит запись (промежуточные бар коды складываются в таблицу временных кодов, для того что бы исключить запись одного и того же случайным образом сгенерированного числа)
